> 比特币的UTXO

- 交易花费若干个UTXO，并根据规则创建若干个新的UTXO。
- 系统中账户的余额是用户具有私钥的UTXO的总值



> 以太坊的账户

- 每个账户包括了一个余额，和以太坊特殊定义的数据(代码和内部存储)
- 如果接受账户有相关代码，则代码会自动运行，并且它的内部存储也可能被改变，或者代码还可能向其他账户发送额外的消息。



> 优缺点比较

比特币UTXO的优点

- 更高程度的隐私。
- 潜在的可扩展性。 只需要依赖拥有UTXO的那些人去维护基于Merkle树的所有权证吗就够了。 
- 比特币用UTXO防止了重放攻击， 输入UTXO变了！



以太坊账户模式优点：

- 可以节省大量空间：不将UTXOs分开存储，而是合为一个账户；每个交易只需要一个输入、一个签名并产生一个输出。
- 更好的替代性。 UTXO的设计使得货币从来源分成了“可花费”和“不可花费”两类，这在实际应用中很难有对应的模型。
- 更加简单：容易编码和理解。 UTXO在脚本逻辑复杂时更令人费解。
- 便于维护持久轻节点：只要沿着特定方向扫描状态树，轻节点可以很容易地随时访问账户相关的所有数据。而UTXO的每个交易都会使得状态引用发生改变。这对轻节点来说长时间运行Dapp会有很大压力。

|          | BitCoin        | Ethereum         |
| -------- | -------------- | ---------------- |
| 设计定位 | 现金系统       | 去中心化应用平台 |
| 数据组成 | 交易列表(账本) | 交易和账户状态   |
| 交易对象 | UTXO           | ACCOUNTS         |
| 代码控制 | 脚本           | 智能合约         |



> 以太坊账户类型

- 外部账户 (Externally owned account, EOA)
- 合约账户 (Contract accounts)



> EOA 外部账户

(用户账户/普通账户)

- 有对应的以太币余额
- 可发送交易 (转币或触发合约代码)
- 由用户私钥控制
- 没有关联代码



> 合约账户

- 有对应的以太币余额
- 有关联代码
- 由代码控制
- 可通过执行交易或来自其它合约的调用消息来触发代码执行
- 执行代码时可以操作自己的存储空间，也可以调用其它合约



![WeChatbe4a5cead4ff41f0ed56ac993ac95ddb](https://picgohuanjie.oss-cn-beijing.aliyuncs.com/img/WeChatbe4a5cead4ff41f0ed56ac993ac95ddb.png?x-oss-process=style/compress)



> 以太坊交易 Transaction

签名的数据包，由EOA发送到另一个账户

- 消息的接收方地址
- 发送方签名
- 金额 VALUE
- 数据 DATA (可选)
- START GAS
- GAS PRICE



> 消息 Message

-- 合约可以向其它合约发送“消息”

-- 消息时不回被序列化的虚拟对象，只存在于以太坊执行环境(EVM)中

-- 可以看作函数

- 消息发送方
- 消息接收方
- 金额 VALUE
- 数据 DATA
- START GAS



> 合约 Contract

- 可以读/写自己的内部存储(32字节key-value的数据库)
- 可以向其它合约发送消息，依次触发执行
- 一旦合约运行结束，并且由它发送的消息触发的所有子执行 (sub-execution) 结束，EVM就会中止运行，直到下次交易被唤醒。



> 合约应用一

- 维护一个数据存储(账本)，存放对其他合约或外部世界有用的内容
- 最经典的例子是模拟货币的合约(代币)



> 合约应用二

- 通过合约实现一种具有更复杂的访问策略的普通账户(EOA), 这被称为“转发合同”： 只有在满足某些条件时才会将传入的消息重新发送到某个所需的目的地址；例如， 一个人可以拥有一份转发合约，该合约会等待直到给定三个私钥中的两个确定之后，再重新发送特定消息
- 钱包合约是这类应用中很好的例子



> 合约应用三

- 管理多个用户之间的持续合同或关系
- 这方面的例子包括金融合同，以及某些特定的托管合同或某种保险