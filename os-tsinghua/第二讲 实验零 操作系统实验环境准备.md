![WeChat6629ddeb25c5523e3de6049f08ec5bd6.png](http://ww1.sinaimg.cn/large/008aPpVGgy1gp2qdiwns2j323s1087wk.jpg)

![WeChatcabce3918592e655c68fde06a2029bf8.png](http://ww1.sinaimg.cn/large/008aPpVGgy1gp2qf5ttpnj31go154u0z.jpg)

## 2.4 实验环境搭建

> 了解x86-32硬件

- Intel 80386 运行模式概述
- Intel 80386 内存架构概述
- Intel 80386 寄存器概述

> 开发编译调试工具

- gcc: C语言编辑器
- gdb: 执行程序调试器
- make: 软件工程管理工具 

## 2.5 x86-32硬件介绍

> 80386有四种运行模式

- 实模式
- 保护模式
- SMM模式
- 虚拟8086模式

> > 实模式

80386加电启动后处于实模式运行状态，在这种状态下软件可访问的物理内存空间不能超过1MB(20位寻址空间)，且无法发挥Intel 80386以上级别的32位CPU的4GB内存管理能力。

> > 保护模式

支持内存分页机制，提供了对虚拟内存的良好支持。保护模式下80386支持多任务，还支持优先级机制，不同的程序可以运行在不同的优先级上，优先级一共分0～4个级别，操作系统运行在最高最高的优先级0上，应用程序则运行在比较低的级别上；配合良好的检查机制后，既可以在任务间实现数据的安全共享也可以很好地隔离各个任务。

> 内存框架

- 地址是访问内存空间的索引
- 80386是32位的处理器，即可以寻址的物理内存地址空间为2^32=4G字节
- 物理内存地址空间是处理器提交到总线上用于访问计算机系统中的内存和外设的最终地址。一个计算机系统中只有一个物理地址空间。
- 线性地址空间是在操作系统的需存管理之下每个运行的应用程序能访问的地址空间。每个运行的应用程序都认为自己独享整个计算机系统的地址空间，这样可以让多个运行的应用程序之间相互隔离。
- 逻辑地址空间是应用程序直接使用的地址空间。

![WeChat26dda7f7612d094d5efe3f749fbb48ee.png](http://ww1.sinaimg.cn/large/008aPpVGgy1gp3bm7ue7hj30zq03w49s.jpg)

> 寄存器

80386的寄存器可以分为8组

- 通用寄存器
  - EAX：累加器
  - EBX：基址寄存器
  - ECX：计数器
  - EDX：数据寄存器
  - ESI：源地址指针寄存器
  - EDI：目的地址指针寄存器
  - EBP：基址指针寄存器
  - ESP：堆栈指针寄存器
- 段寄存器
  - CS：代码段 Code Segment
  - DS：数据段 Data Segment
  - ES：附加数据段 Extra Segment
  - SS：堆栈段 Stack Segment
  - FS：附加段
  - GS：附加段
- 指令指针寄存器 EIP
- 标志寄存器 EFLAGS
- 控制寄存器
- 系统地址寄存器，调试寄存器，测试寄存器

